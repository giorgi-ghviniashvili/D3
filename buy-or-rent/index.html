<!DOCTYPE html>

<html>

<head>
    <meta charset="UTF-8">
    <title>Chart</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
    <style type="text/css">
        .domain {
            stroke: #fff;
          }

        svg {
          display: block;
          margin: auto;
        }

        .container {
          margin-bottom: 30px;
        }

        .ticks {
          font: 10px sans-serif;
        }

        .track,
        .track-inset,
        .track-overlay {
          stroke-linecap: round;
        }

        .track {
          stroke: #000;
          stroke-opacity: 0.3;
          stroke-width: 10px;
        }

        .track-inset {
          stroke: #ddd;
          stroke-width: 8px;
        }

        .track-overlay {
          pointer-events: stroke;
          /*stroke-width: 50px;*/
          stroke: transparent;
          
        }

        .handle {
          fill: #fff;
          stroke: #000;
          stroke-opacity: 0.5;
          stroke-width: 1.25px;
          cursor: ew-resize;
        }
        .result{
            background-color: rgb(186, 216, 10);
            border-radius: 5px;
            padding: 10px;
            text-align: center;
        }
        .axis text {
          fill: #89919e;
          font-weight: bold;
          font-size: 11px;
        }
        .axis line {
          stroke: #89919e;
          stroke-width: 1.5px; 
        }
        .indicator-container{
          align-items: flex-end;
        }
        .inputDiv input {
          margin-bottom: 0px;
        }
        .inputDiv p {
          margin: 0px;
        }
        .inputDivHomePrice input{
          margin-bottom: 20px;
        }
    </style>
</head>

<body translate="no">
    <main>
  <div class="container">
    <div class="row">
      <div class="col s12 m8 l9">
        
        <div class="divider"></div>
        <div class="section">
          <h5>Home Price</h5>
          <p>lorem ipsum lorem ipsum</p>
          <div class="indicator-container valign-wrapper">
            <div class="inputDiv col s2 inputDivHomePrice">
              <input>
            </div>
            <div id="home-price" class="chart-container col s10">
            </div>
          </div>
        </div>
        <div class="divider"></div>
        <div class="section">
          <h5>How Long Do You Plan to Stay?</h5>
          <div class="indicator-container valign-wrapper">
            <div class="inputDiv col s2">
              <input>
              <p>lorem ipsum</p>
            </div>
            <div id="how-long" class="chart-container col s10">
            </div>
          </div>
        </div>
        <div class="divider"></div>
        <div class="section">
          <h5>What Are Your Mortgage Details?</h5>
          <div class="indicator-container valign-wrapper">
            <div class="inputDiv col s2">
              <input>
              <p>Mortgage rate</p>
            </div>
            <div id="mortgage-rate" class="chart-container col s10">
            </div>
          </div>
          
          <div class="indicator-container valign-wrapper">
            
            <div class="inputDiv col s2">
              <input>
              <p>Down payment</p>
            </div>
            <div id="down-rate" class="chart-container col s10">
            </div>
          </div>
          
           <div class="indicator-container valign-wrapper">
            
            <div class="inputDiv col s2">
              <input>
              <p>Length of Mortgage</p>
            </div>
            <div id="mortgage-period" class="chart-container col s10">
            </div>
          </div>
        </div>
        <div class="section">
          <h5>What Does the Future Hold?</h5>
          <div class="indicator-container valign-wrapper">
            
            <div class="inputDiv col s2">
              <input>
              <p>Home price growth</p>
            </div>
            <div id="home-price-growth-rate" class="chart-container col s10">
            </div>
          </div>

          <div class="indicator-container valign-wrapper">
            <div class="inputDiv col s2">
              <input>
              <p>Rent price growth</p>
          </div>
            <div id="rent-growth-rate" class="chart-container col s10">
            </div>
          </div>

          <div class="indicator-container valign-wrapper">
            <div class="inputDiv col s2">
              <input>
              <p>Investment return rate</p>
          </div>
            <div id="investment-return-rate" class="chart-container col s10">
            </div>
          </div>

          <div class="indicator-container valign-wrapper">
            <div class="inputDiv col s2">
              <input>
              <p>Inflation rate</p>
          </div>
            <div id="inflation-rate" class="chart-container col s10">
            </div>
          </div>
        </div>
        <div class="section">
          <h5>Taxes</h5>
          <p>Property taxes and mortgage-interest costs are significant but also deductible. The higher your marginal tax rate is, the bigger the deduction.</p>
          <div class="indicator-container valign-wrapper">
            <div class="inputDiv col s2">
              <input>
              <p>Property tax rate</p>
            </div>
            <div id="property-tax-rate" class="chart-container col s10">
            </div>
          </div>
          <div class="indicator-container valign-wrapper">
            <div class="inputDiv col s2">
              <input>
              <p>marginal tax rate</p>
            </div>
            <div id="marginal-tax-rate" class="chart-container col s10">
            </div>
          </div>
        </div>
        <div class="section">
          <h5>Closing Costs</h5>
          <p>Youâ€™ll have to pay various fees when you buy your home, as well as when you sell it.</p>
          <div class="indicator-container valign-wrapper">
            <div class="inputDiv col s2">
              <input>
              <p>Costs of buying home</p>
            </div>
            <div id="costs-of-buying-home" class="chart-container col s10">
            </div>
          </div>
          <div class="indicator-container valign-wrapper">
            <div class="inputDiv col s2">
              <input>
              <p>Costs of selling home</p>
            </div>
            <div id="costs-of-selling-home" class="chart-container col s10">
            </div>
          </div>
        </div>
        <div class="section">
          <h5>Maintenance and Fees</h5>
          <p>Owning a home comes with a surprising variety of expenses that renters do not directly pay.</p>
          <div class="indicator-container valign-wrapper">
            <div class="inputDiv col s2">
              <input>
              <p>maintainance/renovation</p>
            </div>
            <div id="maintainance-renovation" class="chart-container col s10">
            </div>
          </div>
          <div class="indicator-container valign-wrapper">
            <div class="inputDiv col s2">
              <input>
              <p>Homeowner's insurance</p>
            </div>
            <div id="insurance" class="chart-container col s10">
            </div>
          </div>
          <div class="indicator-container valign-wrapper">
            <div class="inputDiv col s2">
              <input>
              <p>Mothly utilities</p>
            </div>
            <div id="mothly-utilities" class="chart-container col s10">
            </div>
          </div>
          <div class="indicator-container valign-wrapper">
            <div class="inputDiv col s2">
              <input>
              <p>Mothly common fees</p>
            </div>
            <div id="mothly-common-fees" class="chart-container col s10">
            </div>
          </div>
          <div class="indicator-container valign-wrapper">
            <div class="inputDiv col s2">
              <input>
              <p>Common fees deduction</p>
            </div>
            <div id="common-fees-deduction" class="chart-container col s10">
            </div>
          </div>
        </div>
        <div class="section">
          <h5>Additional Renting Costs</h5>
          <p>These are the costs on top of rent, such as the fee you pay to a broker and the opportunity cost on your security deposit. But these expenses typically have a negligible impact.</p>
          <div class="indicator-container valign-wrapper">
            <div class="inputDiv col s2">
              <input>
              <p>Security deposit</p>
            </div>
            <div id="security-deposit" class="chart-container col s10">
            </div>
          </div>
          <div class="indicator-container valign-wrapper">
            <div class="inputDiv col s2">
              <input>
              <p>Broker's fee</p>
            </div>
            <div id="brokers-fee" class="chart-container col s10">
            </div>
          </div>
          <div class="indicator-container valign-wrapper">
            <div class="inputDiv col s2">
              <input>
              <p>Rent's insurance</p>
            </div>
            <div id="rents-insurance" class="chart-container col s10">
            </div>
          </div>
        </div>
      </div>
      <div class="col hide-on-small-only m4 l3">
        <div class="toc-wrapper pinned" style="top: 30px;">

          <div>
            If you can rent a similar home with less then ...
          </div>
          <div id="result" class="result"></div>
          <div> ... Then renting is better</div>
        </div>
      </div>
    </div>
  </div>
</main>
    <script src="libs/d3.v4.min.js"></script>
    <script src="scripts/constants.js"></script>
    <script src="scripts/logic.js"></script>
    <script src="scripts/d3script.js"></script>
    <script>
    var chartWidth = document.getElementsByClassName("chart-container")[0].clientWidth;
    var homePriceChartHeight = 300;
    var otherChartHeight = 180;
    function getData() {
          var startNumber = 30000;
          var endNumber = 3000000;
          var numberOfBars = 50;
          var data = [startNumber];
          var difference = 1000;
          var i = 0;

          while(true){
              var number = data[i] + difference;
              if (number >= endNumber)
                    break;
              data.push(number);
              difference *= 1.1;
              i++;
          }
          console.log(data);
          return data;
    }

    var chartNames = ["home-price", "living-period", "mortgage-rate", "down-rate", "mortgage-period"];

    var charts = [

      // home price chart
      renderChart()
        .chartName(chartNames[0])
        .svgHeight(homePriceChartHeight)
        .svgWidth(chartWidth)
        .marginBottom(30)
        .marginRight(50)
        .container('#home-price')
        .data(getData())
        .xScaleExtern(d3.scalePow()
          .exponent(0.2)
          .domain([30000, 3000000]))
        .indicator("homePrice")
        .onDrag(function(value) {

            currentIndicators.homePrice = value;

            var p = getPayment(currentIndicators.homePrice, currentIndicators.mortgageYears, 
                currentIndicators.mortgageRate, currentIndicators.downRate);

            currentPayment = p;

            charts.forEach(chart => {
              chart.updateChart(value);
            });

            var result = document.getElementById("result");

            result.innerText = "$ " + Math.round(p) + " per month";
        
        })

        // how long do you stay?
        .debug(true)
        .run(),
        renderChart()
        .chartName(chartNames[1])
        .svgHeight(otherChartHeight)
        .svgWidth(chartWidth)
        .marginBottom(30)
        .marginRight(50)
        .container('#how-long')
        .data(d3.range(1, 40, 1))
        .xScaleExtern(d3.scaleLinear()
          .domain([1, 40]))
        .indicator("livingLength")
        .onDrag(function(value) {

            currentIndicators.livingLength = value;

            var p = getPayment(currentIndicators.homePrice, currentIndicators.mortgageYears, 
                currentIndicators.mortgageRate, currentIndicators.downRate);

            currentPayment = p;

            charts.forEach(chart => {
              chart.updateChart(currentIndicators.homePrice);
            });

            var result = document.getElementById("result");

            result.innerText = "$ " + Math.round(p) + " per month";
        
        })
        .debug(true)
        .run(),

        renderChart()
        .chartName(chartNames[2])
        .svgHeight(otherChartHeight)
        .svgWidth(chartWidth)
        .marginBottom(30)
        .marginRight(50)
        .container('#mortgage-rate')
        .xAxisFormat(d3.format(""))
        .data(d3.range(0, 15, 0.3))
        .xScaleExtern(d3.scaleLinear()
          .domain([0, 15]))
        .indicator("mortgageRate")
        .onDrag(function(value) {
            
            currentIndicators.mortgageRate = value;

            var p = getPayment(currentIndicators.homePrice, currentIndicators.mortgageYears, value, currentIndicators.downRate);

            currentPayment = p;

            charts.forEach(chart => {
              chart.updateChart(currentIndicators.homePrice);
            });

            var result = document.getElementById("result");

            result.innerText = "$ " + Math.round(p) + " per month";
        
        })
        .debug(true)
        .run(),

        renderChart()
        .chartName(chartNames[3])
        .svgHeight(otherChartHeight)
        .svgWidth(chartWidth)
        .marginBottom(30)
        .marginRight(50)
        .container('#down-rate')
        .xAxisFormat(d3.format(""))
        .data(d3.range(0, 100, 3))
        .xScaleExtern(d3.scaleLinear()
          .domain([0, 100]))
        .indicator("downRate")
        .onDrag(function(value) {
            
            currentIndicators.downRate = value;

            var p = getPayment(currentIndicators.homePrice, currentIndicators.mortgageYears, currentIndicators.mortgageRate, value);

            currentPayment = p;

            charts.forEach(chart => {
              chart.updateChart(currentIndicators.homePrice);
            });
            
            var result = document.getElementById("result");

            result.innerText = "$ " + Math.round(p) + " per month";
        
        })
        .debug(true)
        .run(),

        renderChart()
        .chartName(chartNames[4])
        .svgHeight(otherChartHeight)
        .svgWidth(chartWidth)
        .marginBottom(30)
        .marginRight(50)
        .container('#mortgage-period')
        .xAxisFormat(d3.format(""))
        .data(d3.range(1, 41))
        .xScaleExtern(d3.scaleLinear()
          .domain([1, 40]))
        .indicator("mortgageYears")
        .onDrag(function(value) {
            
            currentIndicators.mortgageYears = value;

            var p = getPayment(currentIndicators.homePrice, value, currentIndicators.mortgageRate, currentIndicators.downRate);

            currentPayment = p;

            charts.forEach(chart => {
              chart.updateChart(currentIndicators.homePrice);
            });

            var result = document.getElementById("result");

            result.innerText = "$ " + Math.round(p) + " per month";
        
        })
        .debug(true)
        .run(),

        renderChart()
        .chartName(chartNames[4])
        .svgHeight(otherChartHeight)
        .svgWidth(chartWidth)
        .marginBottom(30)
        .marginRight(50)
        .container('#home-price-growth-rate')
        .xAxisFormat(d => {return d3.format(".0%")(d / 100)})
        .data(d3.range(-5, 15, 1))
        .xScaleExtern(d3.scaleLinear()
          .domain([-5, 15]))
        .indicator("annualAppreciation")
        .onDrag(function(value) {
            
            currentIndicators.annualAppreciation = value;

            // var p = getPayment(currentIndicators.homePrice, value, currentIndicators.mortgageRate, currentIndicators.downRate);

            // currentPayment = p;

            // charts.forEach(chart => {
            //   chart.updateChart(currentIndicators.homePrice);
            // });

            // var result = document.getElementById("result");

            // result.innerText = "$ " + Math.round(p) + " per month";
        
        })
        .debug(true)
        .run(),

        renderChart()
        .chartName(chartNames[4])
        .svgHeight(otherChartHeight)
        .svgWidth(chartWidth)
        .marginBottom(30)
        .marginRight(50)
        .container('#rent-growth-rate')
        .xAxisFormat(d => {return d3.format(".0%")(d / 100)})
        .data(d3.range(-5, 15, 1))
        .xScaleExtern(d3.scaleLinear()
          .domain([-5, 15]))
        .indicator("")
        .onDrag(function(value) {
            
            // currentIndicators.mortgageYears = value;

            // var p = getPayment(currentIndicators.homePrice, value, currentIndicators.mortgageRate, currentIndicators.downRate);

            // currentPayment = p;

            // charts.forEach(chart => {
            //   chart.updateChart(currentIndicators.homePrice);
            // });

            // var result = document.getElementById("result");

            // result.innerText = "$ " + Math.round(p) + " per month";
        
        })
        .debug(true)
        .run(),

        renderChart()
        .chartName(chartNames[4])
        .svgHeight(otherChartHeight)
        .svgWidth(chartWidth)
        .marginBottom(30)
        .marginRight(50)
        .container('#investment-return-rate')
        .xAxisFormat(d3.format(""))
        .data(d3.range(1, 41))
        .xScaleExtern(d3.scaleLinear()
          .domain([1, 40]))
        .indicator("")
        .onDrag(function(value) {
            
            // currentIndicators.mortgageYears = value;

            // var p = getPayment(currentIndicators.homePrice, value, currentIndicators.mortgageRate, currentIndicators.downRate);

            // currentPayment = p;

            // charts.forEach(chart => {
            //   chart.updateChart(currentIndicators.homePrice);
            // });

            // var result = document.getElementById("result");

            // result.innerText = "$ " + Math.round(p) + " per month";
        
        })
        .debug(true)
        .run(),

        renderChart()
        .chartName(chartNames[4])
        .svgHeight(otherChartHeight)
        .svgWidth(chartWidth)
        .marginBottom(30)
        .marginRight(50)
        .container('#inflation-rate')
        .xAxisFormat(d3.format(""))
        .data(d3.range(1, 41))
        .xScaleExtern(d3.scaleLinear()
          .domain([1, 40]))
        .indicator("generalInflation")
        .onDrag(function(value) {
            
            currentIndicators.generalInflation = value;

            // var p = getPayment(currentIndicators.homePrice, value, currentIndicators.mortgageRate, currentIndicators.downRate);

            // currentPayment = p;

            // charts.forEach(chart => {
            //   chart.updateChart(currentIndicators.homePrice);
            // });

            // var result = document.getElementById("result");

            // result.innerText = "$ " + Math.round(p) + " per month";
        
        })
        .debug(true)
        .run(),

        renderChart()
        .chartName(chartNames[4])
        .svgHeight(otherChartHeight)
        .svgWidth(chartWidth)
        .marginBottom(30)
        .marginRight(50)
        .container('#property-tax-rate')
        .xAxisFormat(d => {return d3.format(".0%")(d / 100)})
        .data(d3.range(0, 10, 1))
        .xScaleExtern(d3.scaleLinear()
          .domain([0, 10]))
        .indicator("propertyTaxRate")
        .onDrag(function(value) {
            
            currentIndicators.propertyTaxRate = value;

            // var p = getPayment(currentIndicators.homePrice, value, currentIndicators.mortgageRate, currentIndicators.downRate);

            // currentPayment = p;

            // charts.forEach(chart => {
            //   chart.updateChart(currentIndicators.homePrice);
            // });

            // var result = document.getElementById("result");

            // result.innerText = "$ " + Math.round(p) + " per month";
        
        })
        .debug(true)
        .run(),

        renderChart()
        .chartName(chartNames[4])
        .svgHeight(otherChartHeight)
        .svgWidth(chartWidth)
        .marginBottom(30)
        .marginRight(50)
        .container('#marginal-tax-rate')
        .xAxisFormat(d => {return d3.format(".0%")(d / 100)})
        .data(d3.range(0, 50, 1))
        .xScaleExtern(d3.scaleLinear()
          .domain([0, 50]))
        .indicator("marginalIncomeTaxRate")
        .onDrag(function(value) {
            
            currentIndicators.marginalIncomeTaxRate = value;

            // var p = getPayment(currentIndicators.homePrice, value, currentIndicators.mortgageRate, currentIndicators.downRate);

            // currentPayment = p;

            // charts.forEach(chart => {
            //   chart.updateChart(currentIndicators.homePrice);
            // });

            // var result = document.getElementById("result");

            // result.innerText = "$ " + Math.round(p) + " per month";
        
        })
        .debug(true)
        .run(),

        renderChart()
        .chartName(chartNames[4])
        .svgHeight(otherChartHeight)
        .svgWidth(chartWidth)
        .marginBottom(30)
        .marginRight(50)
        .container('#costs-of-buying-home')
        .xAxisFormat(d => {return d3.format(".0%")(d / 100)})
        .data(d3.range(0, 50, 1))
        .xScaleExtern(d3.scaleLinear()
          .domain([0, 50]))
        .indicator("marginalIncomeTaxRate")
        .onDrag(function(value) {
            
            currentIndicators.marginalIncomeTaxRate = value;

            // var p = getPayment(currentIndicators.homePrice, value, currentIndicators.mortgageRate, currentIndicators.downRate);

            // currentPayment = p;

            // charts.forEach(chart => {
            //   chart.updateChart(currentIndicators.homePrice);
            // });

            // var result = document.getElementById("result");

            // result.innerText = "$ " + Math.round(p) + " per month";
        
        })
        .debug(true)
        .run(),

        renderChart()
        .chartName(chartNames[4])
        .svgHeight(otherChartHeight)
        .svgWidth(chartWidth)
        .marginBottom(30)
        .marginRight(50)
        .container('#costs-of-selling-home')
        .xAxisFormat(d => {return d3.format(".0%")(d / 100)})
        .data(d3.range(0, 50, 1))
        .xScaleExtern(d3.scaleLinear()
          .domain([0, 50]))
        .indicator("marginalIncomeTaxRate")
        .onDrag(function(value) {
            
            currentIndicators.marginalIncomeTaxRate = value;

            // var p = getPayment(currentIndicators.homePrice, value, currentIndicators.mortgageRate, currentIndicators.downRate);

            // currentPayment = p;

            // charts.forEach(chart => {
            //   chart.updateChart(currentIndicators.homePrice);
            // });

            // var result = document.getElementById("result");

            // result.innerText = "$ " + Math.round(p) + " per month";
        
        })
        .debug(true)
        .run(),

        renderChart()
        .chartName(chartNames[4])
        .svgHeight(otherChartHeight)
        .svgWidth(chartWidth)
        .marginBottom(30)
        .marginRight(50)
        .container('#maintainance-renovation')
        .xAxisFormat(d => {return d3.format(".0%")(d / 100)})
        .data(d3.range(0, 50, 1))
        .xScaleExtern(d3.scaleLinear()
          .domain([0, 50]))
        .indicator("marginalIncomeTaxRate")
        .onDrag(function(value) {
            
            currentIndicators.marginalIncomeTaxRate = value;

            // var p = getPayment(currentIndicators.homePrice, value, currentIndicators.mortgageRate, currentIndicators.downRate);

            // currentPayment = p;

            // charts.forEach(chart => {
            //   chart.updateChart(currentIndicators.homePrice);
            // });

            // var result = document.getElementById("result");

            // result.innerText = "$ " + Math.round(p) + " per month";
        
        })
        .debug(true)
        .run(),

        renderChart()
        .chartName(chartNames[4])
        .svgHeight(otherChartHeight)
        .svgWidth(chartWidth)
        .marginBottom(30)
        .marginRight(50)
        .container('#insurance')
        .xAxisFormat(d => {return d3.format(".0%")(d / 100)})
        .data(d3.range(0, 50, 1))
        .xScaleExtern(d3.scaleLinear()
          .domain([0, 50]))
        .indicator("marginalIncomeTaxRate")
        .onDrag(function(value) {
            
            currentIndicators.marginalIncomeTaxRate = value;

            // var p = getPayment(currentIndicators.homePrice, value, currentIndicators.mortgageRate, currentIndicators.downRate);

            // currentPayment = p;

            // charts.forEach(chart => {
            //   chart.updateChart(currentIndicators.homePrice);
            // });

            // var result = document.getElementById("result");

            // result.innerText = "$ " + Math.round(p) + " per month";
        
        })
        .debug(true)
        .run(),

        renderChart()
        .chartName(chartNames[4])
        .svgHeight(otherChartHeight)
        .svgWidth(chartWidth)
        .marginBottom(30)
        .marginRight(50)
        .container('#mothly-utilities')
        .xAxisFormat(d => {return d3.format(".0%")(d / 100)})
        .data(d3.range(0, 50, 1))
        .xScaleExtern(d3.scaleLinear()
          .domain([0, 50]))
        .indicator("marginalIncomeTaxRate")
        .onDrag(function(value) {
            
            currentIndicators.marginalIncomeTaxRate = value;

            // var p = getPayment(currentIndicators.homePrice, value, currentIndicators.mortgageRate, currentIndicators.downRate);

            // currentPayment = p;

            // charts.forEach(chart => {
            //   chart.updateChart(currentIndicators.homePrice);
            // });

            // var result = document.getElementById("result");

            // result.innerText = "$ " + Math.round(p) + " per month";
        
        })
        .debug(true)
        .run(),

        renderChart()
        .chartName(chartNames[4])
        .svgHeight(otherChartHeight)
        .svgWidth(chartWidth)
        .marginBottom(30)
        .marginRight(50)
        .container('#mothly-common-fees')
        .xAxisFormat(d => {return d3.format(".0%")(d / 100)})
        .data(d3.range(0, 50, 1))
        .xScaleExtern(d3.scaleLinear()
          .domain([0, 50]))
        .indicator("marginalIncomeTaxRate")
        .onDrag(function(value) {
            
            currentIndicators.marginalIncomeTaxRate = value;

            // var p = getPayment(currentIndicators.homePrice, value, currentIndicators.mortgageRate, currentIndicators.downRate);

            // currentPayment = p;

            // charts.forEach(chart => {
            //   chart.updateChart(currentIndicators.homePrice);
            // });

            // var result = document.getElementById("result");

            // result.innerText = "$ " + Math.round(p) + " per month";
        
        })
        .debug(true)
        .run(),

        renderChart()
        .chartName(chartNames[4])
        .svgHeight(otherChartHeight)
        .svgWidth(chartWidth)
        .marginBottom(30)
        .marginRight(50)
        .container('#common-fees-deduction')
        .xAxisFormat(d => {return d3.format(".0%")(d / 100)})
        .data(d3.range(0, 50, 1))
        .xScaleExtern(d3.scaleLinear()
          .domain([0, 50]))
        .indicator("marginalIncomeTaxRate")
        .onDrag(function(value) {
            
            currentIndicators.marginalIncomeTaxRate = value;

            // var p = getPayment(currentIndicators.homePrice, value, currentIndicators.mortgageRate, currentIndicators.downRate);

            // currentPayment = p;

            // charts.forEach(chart => {
            //   chart.updateChart(currentIndicators.homePrice);
            // });

            // var result = document.getElementById("result");

            // result.innerText = "$ " + Math.round(p) + " per month";
        
        })
        .debug(true)
        .run(),

        renderChart()
        .chartName(chartNames[4])
        .svgHeight(otherChartHeight)
        .svgWidth(chartWidth)
        .marginBottom(30)
        .marginRight(50)
        .container('#security-deposit')
        .xAxisFormat(d => {return d3.format(".0%")(d / 100)})
        .data(d3.range(0, 50, 1))
        .xScaleExtern(d3.scaleLinear()
          .domain([0, 50]))
        .indicator("marginalIncomeTaxRate")
        .onDrag(function(value) {
            
            currentIndicators.marginalIncomeTaxRate = value;

            // var p = getPayment(currentIndicators.homePrice, value, currentIndicators.mortgageRate, currentIndicators.downRate);

            // currentPayment = p;

            // charts.forEach(chart => {
            //   chart.updateChart(currentIndicators.homePrice);
            // });

            // var result = document.getElementById("result");

            // result.innerText = "$ " + Math.round(p) + " per month";
        
        })
        .debug(true)
        .run(),

        renderChart()
        .chartName(chartNames[4])
        .svgHeight(otherChartHeight)
        .svgWidth(chartWidth)
        .marginBottom(30)
        .marginRight(50)
        .container('#marginal-tax-rate')
        .xAxisFormat(d => {return d3.format(".0%")(d / 100)})
        .data(d3.range(0, 50, 1))
        .xScaleExtern(d3.scaleLinear()
          .domain([0, 50]))
        .indicator("marginalIncomeTaxRate")
        .onDrag(function(value) {
            
            currentIndicators.marginalIncomeTaxRate = value;

            // var p = getPayment(currentIndicators.homePrice, value, currentIndicators.mortgageRate, currentIndicators.downRate);

            // currentPayment = p;

            // charts.forEach(chart => {
            //   chart.updateChart(currentIndicators.homePrice);
            // });

            // var result = document.getElementById("result");

            // result.innerText = "$ " + Math.round(p) + " per month";
        
        })
        .debug(true)
        .run(),

        renderChart()
        .chartName(chartNames[4])
        .svgHeight(otherChartHeight)
        .svgWidth(chartWidth)
        .marginBottom(30)
        .marginRight(50)
        .container('#brokers-fee')
        .xAxisFormat(d => {return d3.format(".0%")(d / 100)})
        .data(d3.range(0, 50, 1))
        .xScaleExtern(d3.scaleLinear()
          .domain([0, 50]))
        .indicator("marginalIncomeTaxRate")
        .onDrag(function(value) {
            
            currentIndicators.marginalIncomeTaxRate = value;

            // var p = getPayment(currentIndicators.homePrice, value, currentIndicators.mortgageRate, currentIndicators.downRate);

            // currentPayment = p;

            // charts.forEach(chart => {
            //   chart.updateChart(currentIndicators.homePrice);
            // });

            // var result = document.getElementById("result");

            // result.innerText = "$ " + Math.round(p) + " per month";
        
        })
        .debug(true)
        .run(),

        renderChart()
        .chartName(chartNames[4])
        .svgHeight(otherChartHeight)
        .svgWidth(chartWidth)
        .marginBottom(30)
        .marginRight(50)
        .container('#rents-insurance')
        .xAxisFormat(d => {return d3.format(".0%")(d / 100)})
        .data(d3.range(0, 50, 1))
        .xScaleExtern(d3.scaleLinear()
          .domain([0, 50]))
        .indicator("marginalIncomeTaxRate")
        .onDrag(function(value) {
            
            currentIndicators.marginalIncomeTaxRate = value;

            // var p = getPayment(currentIndicators.homePrice, value, currentIndicators.mortgageRate, currentIndicators.downRate);

            // currentPayment = p;

            // charts.forEach(chart => {
            //   chart.updateChart(currentIndicators.homePrice);
            // });

            // var result = document.getElementById("result");

            // result.innerText = "$ " + Math.round(p) + " per month";
        
        })
        .debug(true)
        .run()
        ];

    </script>
</body>
</html>