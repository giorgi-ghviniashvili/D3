<!DOCTYPE html>
<html>
<head>
	<title></title>
	<style type="text/css">

		body{
			background-color: #ccc;
		}
		.tableContainer {
			margin:auto;
			width: 1000px;
			height: 650px;
			background-color: #fff; 
      
		}

	svg{
	  margin:20px;
	}
	rect:hover
	{
	  opacity: 0.5;
	  cursor: pointer;
	}
	svg rect {
					 -moz-transition: all 0.8s;
					 -o-transition: all 0.8s;
					
					 -webkit-transition: all 0.8s;
					 transition: all 0.8s;
				}
	svg text {
	 pointer-events: none;
	}
.modal,
.modal-box {
  z-index: 900;
}

.modal-sandbox {
  position: fixed;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  background: transparent;
}

.modal {
  display: none; 
  position: fixed;
  width: 100%;
  height: 100%;
  left: 0;
  top: 0;
  background: rgb(0,0,0);
  background: rgba(0,0,0,.8);
  overflow: auto;
}

.modal-box {
  position: relative;
  width: 80%;
  max-width: 920px;
  margin: 100px auto;
  animation-name: modalbox;
  animation-duration: .3s;
  animation-timing-function: ease-out;
}

.modal-header {
  padding: 20px 40px;
  background: #546E7A;
  color: #ffffff;
}

.modal-body {
  background: #ECEFF1;
  padding: 60px 40px;
}

/* Close Button */
.close-modal {
  text-align: right;
  cursor: pointer;
}

/* Animation */
@-webkit-keyframes modalbox {
  0% {
    top: -250px; 
    opacity: 0;
  }
  100% {
    top: 0; 
    opacity: 1;
  }
}

@keyframes modalbox {
  0% {
    top: -250px; 
    opacity: 0;
  }
  100% {
    top: 0; 
    opacity: 1;
  }
}
	</style>
</head>
<body>
	<div class="tableContainer">
		<svg class="table"></svg>
</div>
<!-- Modal -->
<div class="modal" id="modal">
  <div class="modal-sandbox"></div>
  <div class="modal-box">
    <div class="modal-header">
      <div class="close-modal">&#10006;</div> 
      <h1></h1>
    </div>
    <div class="modal-body">
      
    </div>
  </div>
</div>
	<script type="text/javascript" src="https://d3js.org/d3.v3.min.js"></script>
</body>
	<script type="text/javascript">
		var dataUrl = "https://raw.githubusercontent.com/Bowserinator/Periodic-Table-JSON/master/PeriodicTableJSON.json";
    var margin = 20;
    var columnMargin = 3;
    var rowMargin = 3;
    var numberOfColumns = 18;
    var columnMarginSum = (numberOfColumns - 1) * columnMargin;
    var rowMarginSum = (numberOfColumns - 1) * columnMargin;
    var tableWidth = 1000 - margin * 2;
    var tableHeight = 650 - margin * 2;
    var elementWidth = (tableWidth - columnMarginSum) / numberOfColumns;
    var elementHeight = elementWidth;
    var colors = {    
                  "diatomic nonmetal": "#4fd671", 
                  "noble gas": "#66728c", 
                  "alkali metal": "#f4ca41",
                  "alkaline earth metal":"#C5BF66",
                  "metalloid": "#09a038", 
                  "polyatomic nonmetal": "#24a54c",
                  "post-transition metal": "#4DB3A2",
                  "transition metal": "#cc916e", 
                  "lanthanide": "#efcdb8",
                  "actinide":"#9B59B6",
                  "unknown, probably transition metal": "#ACB5C3",
                  "unknown, probably post transition metal": "#ACB5C3",
                  "unknown, probably metalloid": "#ACB5C3",
                  "unknown, predicted to be noble gas": "#66728c"
     };

var getPositionX = function(xpos){
  var x = (xpos - 1) * (elementWidth + columnMargin);
  return x;
}
var getPositionY = function(ypos){
  var y = (ypos - 1) * (elementHeight + rowMargin);
  return y;
}

var table = d3.select(".table")
  .attr({"width": tableWidth, "height": tableHeight});

d3.json(dataUrl, function(error, json) {
  var data = json["elements"];
  var tooltip = d3.select("#tooltip");

  table.selectAll("rect")
       .data(data)
       .enter()
       .append("rect")
       .attr("x", d => {return getPositionX(d["xpos"]);})
       .attr("y", d => {return getPositionY(d["ypos"]);})
       .attr("width", elementWidth)
       .attr("height", elementHeight)
       .attr("fill", d => { return colors[d["category"]];})
       .on("click", d => {
          console.log(d);

          var modal = d3.select("#modal");

          modal.select(".modal-header").style("background-color", colors[d["category"]]).select("h1")
                .text(d["symbol"]);

          modal.style("display", "block");

       });
  
  table.selectAll("text")
    .data(data)
    .enter()
    .append("text")
    .text(d => {return d["symbol"];})
    .attr("x", d => {return getPositionX(d["xpos"]) + elementWidth / 2 - 10;})
    .attr("y", d => {return getPositionY(d["ypos"]) + elementHeight / 2 + 6;})
    .attr({"fill": "black", "stroke": "black", "stroke-width": 0.5});

    table.append("rect")
        .attr("width", elementWidth)
        .attr("height", elementHeight)
        .attr("x", d => {return getPositionX(3);})
        .attr("y", d => {return getPositionY(7);})
        .attr("fill", colors["actinide"]);
  
    table.append("rect")
        .attr("width", elementWidth)
        .attr("height", elementHeight)
        .attr("x", d => {return getPositionX(3);})
        .attr("y", d => {return getPositionY(6);})
        .attr("fill", colors["lanthanide"]);
  
    table.append("text")
    .text("57-71")
    .attr("x", d => {return getPositionX(3) + 2;})
    .attr("y", d => {return getPositionY(6) + elementHeight / 2 + 6;})
    .attr({"fill": "black", "stroke": "black", "stroke-width": 0.5});

    table.append("text")
      .text("89-103")
      .attr("x", d => {return getPositionX(3) + 2;})
      .attr("y", d => {return getPositionY(7) + elementHeight / 2 + 6;})
      .attr({"fill": "black", "stroke": "black", "stroke-width": 0.5});


    d3.select(".close-modal")
      .on("click", function(){

        d3.select("#modal")
        .style("display", "none");

      })
});

	</script>
</html>